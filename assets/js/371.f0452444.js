(window.webpackJsonp=window.webpackJsonp||[]).push([[371],{1041:function(t,s,a){"use strict";a.r(s);var n=a(19),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"集合和范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集合和范围","aria-hidden":"true"}},[t._v("#")]),t._v(" 集合和范围 [...]")]),t._v(" "),a("p",[t._v("在方括号 "),a("code",[t._v("[…]")]),t._v(" 中的几个字符或者字符类意味着“搜索给定的字符中的任意一个”。")]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集合","aria-hidden":"true"}},[t._v("#")]),t._v(" 集合")]),t._v(" "),a("p",[t._v("比如说，"),a("code",{staticClass:"pattern"},[t._v("[eao]")]),t._v(" 意味着查找在 3 个字符 "),a("code",[t._v("'a'")]),t._v("、"),a("code",[t._v("'e'")]),t._v(" 或者 "),a("code",[t._v("'o'")]),t._v(" 中的任意一个。")]),t._v(" "),a("p",[t._v("这被叫做一个 "),a("strong",[t._v("集合")]),t._v("。集合可以在正则表达式中和其它常规字符一起使用。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查找 [t 或者 m]，然后再匹配 “op”")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mop top"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[tm]op/gi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "Mop", "top"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("请注意尽管在集合中有多个字符，但它们在匹配中只会对应其中的一个。")]),t._v(" "),a("p",[t._v("所以下面的示例并不会匹配上：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查找 “V”，然后匹配 [o 或者 i]，之后再匹配 “la”")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Voila"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/V[oi]la/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// null，并没有匹配上")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("这个模式会做以下假设：")]),t._v(" "),a("ul",[a("li",[a("code",{staticClass:"pattern"},[t._v("V")]),t._v("，")]),t._v(" "),a("li",[t._v("然后匹配其中的一个字符 "),a("code",{staticClass:"pattern"},[t._v("[oi]")]),t._v("，")]),t._v(" "),a("li",[t._v("然后匹配 "),a("code",{staticClass:"pattern"},[t._v("la")]),t._v("，")])]),t._v(" "),a("p",[t._v("所以可以匹配上 "),a("code",{staticClass:"match"},[t._v("Vola")]),t._v(" 或者 "),a("code",{staticClass:"match"},[t._v("Vila")]),t._v("。")]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#范围","aria-hidden":"true"}},[t._v("#")]),t._v(" 范围")]),t._v(" "),a("p",[t._v("方括号也可以包含 "),a("strong",[t._v("字符范围")]),t._v("。")]),t._v(" "),a("p",[t._v("比如说，"),a("code",{staticClass:"pattern"},[t._v("[a-z]")]),t._v(" 会匹配从 "),a("code",[t._v("a")]),t._v(" 到 "),a("code",[t._v("z")]),t._v(" 范围内的字母，"),a("code",{staticClass:"pattern"},[t._v("[0-5]")]),t._v(" 表示从 "),a("code",[t._v("0")]),t._v(" 到 "),a("code",[t._v("5")]),t._v(" 的数字。")]),t._v(" "),a("p",[t._v("如果我们还想查找小写字母，则可以添加范围 "),a("code",[t._v("a-f")]),t._v("："),a("code",{staticClass:"pattern"},[t._v("[0-9A-Fa-f]")]),t._v("。或添加标志 "),a("code",{staticClass:"pattern"},[t._v("i")]),t._v("。")]),t._v(" "),a("p",[t._v("我们也可以在 "),a("code",[t._v("[…]")]),t._v(" 里面使用字符类。")]),t._v(" "),a("p",[t._v("例如，如果我们想要查找单词字符 "),a("code",{staticClass:"pattern"},[t._v("\\w")]),t._v(" 或连字符 "),a("code",{staticClass:"pattern"},[t._v("-")]),t._v("，则该集合为 "),a("code",{staticClass:"pattern"},[t._v("[\\w-]")]),t._v("。")]),t._v(" "),a("p",[t._v("也可以组合多个类，例如 "),a("code",{staticClass:"pattern"},[t._v("[\\s\\d]")]),t._v(" 表示 “空格字符或数字”。")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[a("strong",[t._v("字符类是某些字符集的简写")])]),t._v(" "),a("p",[t._v("例如：")]),t._v(" "),a("ul",[a("li",[a("strong",[a("code",[t._v("\\d")])]),t._v(" —— 和 "),a("code",{staticClass:"pattern"},[t._v("[0-9]")]),t._v(" 相同，")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("\\w")])]),t._v(" —— 和 "),a("code",{staticClass:"pattern"},[t._v("[a-zA-Z0-9_]")]),t._v(" 相同，")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("\\s")])]),t._v(" —— 和 "),a("code",{staticClass:"pattern"},[t._v("[\\t\\n\\v\\f\\r ]")]),t._v(" 外加少量罕见的 unicode 空格字符相同。")])])]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("h3",{attrs:{id:"示例：多语言-w"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例：多语言-w","aria-hidden":"true"}},[t._v("#")]),t._v(" 示例：多语言 \\w")]),t._v(" "),a("p",[t._v("由于字符类 "),a("code",{staticClass:"pattern"},[t._v("\\w")]),t._v(" 是简写的 "),a("code",{staticClass:"pattern"},[t._v("[a-zA-Z0-9_]")]),t._v("，因此无法找到中文象形文字，西里尔字母等。")]),t._v(" "),a("p",[t._v("我们可以编写一个更通用的模式，该模式可以查找任何语言中的文字字符。这很容易想到就 Unicode 属性："),a("code",{staticClass:"pattern"},[t._v("[\\p{Alpha}\\p{M}\\p{Nd}\\p{Pc}\\p{Join_C}]")]),t._v("。")]),t._v(" "),a("p",[t._v("让我们理解它。类似于 "),a("code",{staticClass:"pattern"},[t._v("\\w")]),t._v("，我们在制作自己的一套字符集，包括以下 unicode 字符：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Alphabetic")]),t._v(" ("),a("code",[t._v("Alpha")]),t._v(") —— 字母，")]),t._v(" "),a("li",[a("code",[t._v("Mark")]),t._v(" ("),a("code",[t._v("M")]),t._v(") —— 重读，")]),t._v(" "),a("li",[a("code",[t._v("Decimal_Number")]),t._v(" ("),a("code",[t._v("Nd")]),t._v(") —— 数字，")]),t._v(" "),a("li",[a("code",[t._v("Connector_Punctuation")]),t._v(" ("),a("code",[t._v("Pc")]),t._v(") —— 下划线 "),a("code",[t._v("'_'")]),t._v(" 和类似的字符，")]),t._v(" "),a("li",[a("code",[t._v("Join_Control")]),t._v(" ("),a("code",[t._v("Join_C")]),t._v(") —— 两个特殊代码 "),a("code",[t._v("200c")]),t._v(" and "),a("code",[t._v("200d")]),t._v("，用于连字，例如阿拉伯语。")])]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("使用示例：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" regexp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[\\p{Alpha}\\p{M}\\p{Nd}\\p{Pc}\\p{Join_C}]/gu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`Hi 你好 12`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// finds all letters and digits:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("regexp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// H,i,你,好,1,2")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("当然，我们可以编辑此模式：添加 unicode 属性或删除它们。文章 "),a("router-link",{attrs:{to:"/learn_javascript_asdiasdkc/three/ioprtymcvzq/03/"}},[t._v("Unicode：修饰符 “u” 和 class \\p{...}")]),t._v(" 中包含了更多 Unicode 属性的细节。")],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[a("strong",[t._v("Edge 和 Firefox 不支持 Unicode 属性")])]),t._v(" "),a("p",[t._v("Edge 和 Firefox 尚未实现 Unicode 属性 "),a("code",{staticClass:"pattern"},[t._v("p{…}")]),t._v("。如果确实需要它们，可以使用库 "),a("a",{attrs:{href:"https://xregexp.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("XRegExp"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("或者只使用我们想要的语言范围的字符，例如西里尔字母 "),a("code",{staticClass:"pattern"},[t._v("[а-я]")]),t._v("。")])]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"排除范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#排除范围","aria-hidden":"true"}},[t._v("#")]),t._v(" 排除范围")]),t._v(" "),a("p",[t._v("除了普通的范围匹配，还有类似 "),a("code",{staticClass:"pattern"},[t._v("[^…]")]),t._v(" 的“排除”范围匹配。")]),t._v(" "),a("p",[t._v("它们通过在匹配查询的开头添加插入符号 "),a("code",[t._v("^")]),t._v(" 来表示，它会匹配所有"),a("strong",[t._v("除了给定的字符")]),t._v("之外的任意字符。")]),t._v(" "),a("p",[t._v("比如说：")]),t._v(" "),a("ul",[a("li",[a("strong",[a("code",[t._v("[^aeyo]")])]),t._v(" —— 匹配任何除了 "),a("code",[t._v("'a'")]),t._v("、"),a("code",[t._v("'e'")]),t._v("、"),a("code",[t._v("'y'")]),t._v(" 或者 "),a("code",[t._v("'o'")]),t._v(" 之外的字符。")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("[^0-9]")])]),t._v(" —— 匹配任何除了数字之外的字符，也可以使用 "),a("code",[t._v("\\D")]),t._v(" 来表示。")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("[^\\s]")])]),t._v(" —— 匹配任何非空字符，也可以使用 "),a("code",[t._v("\\S")]),t._v(" 来表示。")])]),t._v(" "),a("p",[t._v("下面的示例查询除了字母，数字和空格之外的任意字符：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alice15@gmail.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[^\\d\\sA-Z]/gi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @ .")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"在-…-中不转义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-…-中不转义","aria-hidden":"true"}},[t._v("#")]),t._v(" 在 […] 中不转义")]),t._v(" "),a("p",[t._v("通常当我们的确需要查询点字符时，我们需要把它转义成像 "),a("code",{staticClass:"pattern"},[t._v("\\.")]),t._v(" 这样的形式。如果我们需要查询一个反斜杠，我们需要使用 "),a("code",{staticClass:"pattern"},[t._v(" \\\\ ")]),t._v("。")]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("在方括号表示中，绝大多数特殊字符可以在不转义的情况下使用：")]),t._v(" "),a("ul",[a("li",[t._v("表示一个点符号 "),a("code",{staticClass:"pattern"},[t._v(".")]),t._v("。")]),t._v(" "),a("li",[t._v("表示一个加号 "),a("code",{staticClass:"pattern"},[t._v("+")]),t._v("。")]),t._v(" "),a("li",[t._v("表示一个括号 "),a("code",{staticClass:"pattern"},[t._v("( )")]),t._v("。")]),t._v(" "),a("li",[t._v("在开头或者结尾表示一个破折号（在这些位置该符号表示的就不是一个范围） "),a("code",{staticClass:"pattern"},[t._v("-")]),t._v("。")]),t._v(" "),a("li",[t._v("在不是开头的位置表示一个插入符号（在开头位置该符号表示的是排除）"),a("code",{staticClass:"pattern"},[t._v("^")]),t._v("。")]),t._v(" "),a("li",[t._v("表示一个开口的方括号符号 "),a("code",{staticClass:"pattern"},[t._v("[")]),t._v("。")])]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("换句话说，除了在方括号中有特殊含义的字符外，其它所有特殊字符都是允许不添加反斜杠的。")]),t._v(" "),a("p",[t._v("一个在方括号中的点符号 "),a("code",[t._v(".")]),t._v(" 表示的就是一个点字符。查询模式 "),a("code",{staticClass:"pattern"},[t._v("[.,]")]),t._v(" 将会寻找一个为点或者逗号的字符。")]),t._v(" "),a("p",[t._v("在下面的示例中，"),a("code",{staticClass:"pattern"},[t._v("[-().^+]")]),t._v(" 会查找 "),a("code",[t._v("-().^+")]),t._v(" 的其中任意一个字符：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 并不需要转义")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" reg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[-().^+]/g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1 + 2 - 3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 匹配 +，-")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("。。。但是如果你为了“以防万一”转义了它们，这也不会有任何问题：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//转义其中的所有字符")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" reg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[\\-\\(\\)\\.\\^\\+]/g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1 + 2 - 3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 仍能正常工作：+，-")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"范围和标志“u”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#范围和标志“u”","aria-hidden":"true"}},[t._v("#")]),t._v(" 范围和标志“u”")]),t._v(" "),a("p",[t._v("如果集合中有代理对（surrogate pairs），则需要标志 "),a("code",{staticClass:"pattern"},[t._v("u")]),t._v(" 以使其正常工作。")]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("例如，让我们在字符串 "),a("code",{staticClass:"subject"},[t._v("𝒳")]),t._v(" 中查找 "),a("code",{staticClass:"pattern"},[t._v("[𝒳𝒴]")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'𝒳'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[𝒳𝒴]/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 显示一个奇怪的字符，像 [?]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//（搜索执行不正确，返回了半个字符）")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("结果不正确，因为默认情况下正则表达式“不知道”代理对。")]),t._v(" "),a("p",[t._v("正则表达式引擎认为 "),a("code",[t._v("[𝒳𝒴]")]),t._v(" —— 不是两个，而是四个字符：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("𝒳")]),t._v(" "),a("code",[t._v("(1)")]),t._v(" 的左半部分，")]),t._v(" "),a("li",[a("code",[t._v("𝒳")]),t._v(" "),a("code",[t._v("(2)")]),t._v(" 的右半部分，")]),t._v(" "),a("li",[a("code",[t._v("𝒴")]),t._v(" "),a("code",[t._v("(3)")]),t._v(" 的左半部分，")]),t._v(" "),a("li",[a("code",[t._v("𝒴")]),t._v(" "),a("code",[t._v("(4)")]),t._v(" 的右半部分。")])]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("我们可以看到它们的代码，如下所示：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'𝒳𝒴'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'𝒳𝒴'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("charCodeAt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 55349, 56499, 55349, 56500")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("因此，以上示例查找并显示了 "),a("code",[t._v("𝒳")]),t._v(" 的左半部分。")]),t._v(" "),a("p",[t._v("如果我们添加标志 "),a("code",{staticClass:"pattern"},[t._v("u")]),t._v("，那么行为将是正确的：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'𝒳'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[𝒳𝒴]/u")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 𝒳")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("br"),t._v(" "),a("p",[t._v("当我们查找范围时也会出现类似的情况，就像 "),a("code",[t._v("[𝒳-𝒴]")]),t._v("。")]),t._v(" "),a("p",[t._v("如果我们忘记添加标志 "),a("code",{staticClass:"pattern"},[t._v("u")]),t._v("，则会出现错误：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'𝒳'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[𝒳-𝒴]/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误：无效的正则表达式")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("原因是，没有标志 "),a("code",{staticClass:"pattern"},[t._v("u")]),t._v(" 的代理对被视为两个字符，因此 "),a("code",[t._v("[𝒳-𝒴]")]),t._v(" 被解释为 "),a("code",[t._v("[<55349><56499>-<55349><56500>]")]),t._v("（每个代理对都替换为其代码）。现在很容易看出范围 "),a("code",[t._v("56499-55349")]),t._v(" 是无效的：其起始代码 "),a("code",[t._v("56499")]),t._v(" 大于终止代码 "),a("code",[t._v("55349")]),t._v("。这就是错误的原因。")]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("使用标志 "),a("code",{staticClass:"pattern"},[t._v("u")]),t._v("，该模式可以正常匹配：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查找字符从 𝒳 到 𝒵")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'𝒴'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[𝒳-𝒵]/u")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 𝒴")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("br"),t._v(" "),a("br"),t._v(" "),a("br")])},[],!1,null,null,null);s.default=e.exports}}]);