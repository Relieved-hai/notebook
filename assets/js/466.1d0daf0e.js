(window.webpackJsonp=window.webpackJsonp||[]).push([[466],{1285:function(s,n,e){"use strict";e.r(n);var a=e(19),t=Object(a.a)({},function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("auth-auth"),s._v(" "),e("h2",{attrs:{id:"sql语言开发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sql语言开发","aria-hidden":"true"}},[s._v("#")]),s._v(" SQL语言开发")]),s._v(" "),e("p",[s._v("初始 SQL")]),s._v(" "),e("p",[s._v("什么是SQL：一种描述性语言。")]),s._v(" "),e("p",[s._v("SQL语言的作用：对存储在 RDBMS 中的数据进行增删改查等操作。")]),s._v(" "),e("p",[s._v("常用的 SQL 语言的种类：DCL、DDL、DML、TCL")]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("p",[s._v("访问控制")]),s._v(" "),e("p",[s._v("DCL ( Data Control Language )")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("建立数据库账号：create user")])]),s._v(" "),e("li",[e("p",[s._v("对用户授权：grant")])]),s._v(" "),e("li",[e("p",[s._v("收回用户权限：revoke")])])]),s._v(" "),e("br"),s._v(" "),e("p",[s._v("建立程序使用的数据库账号")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE USER [IF NOT EXISTS]\n    user [auth_option] [, user [auth_option]] ...\n    DEFAULT ROLE role [, role ] ...\n    [REQUIRE {NONE | tls_option [[AND] tls_option] ...}]\n    [WITH resource_option [resource_option] ...]\n    [password_option | lock_option] ...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("code",[s._v("user [auth_option]")]),s._v(" 就是要建立的用户名，MySQL 的用户名是由两部分组成，"),e("code",[s._v("用户名@访问控制列表")]),s._v("（决定用户可以从哪些客户端访问）")]),s._v(" "),e("br"),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ CREATE USER mc_class@'192.168.1.%' IDENTIFIED WITH 'mysql_native_password' by '1234567';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("p",[s._v("用户名："),e("code",[s._v("mc_class")])])]),s._v(" "),e("li",[e("p",[s._v("访问控制列表："),e("code",[s._v("192.168.1.%")]),s._v("（ % 代表通配符 ）")])]),s._v(" "),e("li",[e("p",[s._v("指定 MySQL 认证加密方式："),e("code",[s._v("IDENTIFIED WITH 'mysql_native_password'")])])]),s._v(" "),e("li",[e("p",[s._v("密码："),e("code",[s._v("1234567")])])])]),s._v(" "),e("br"),s._v(" "),e("p",[s._v("更多命令可以使用 help 查看。")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ mysql -uroot -p\n\n$ help\n\n$ help create user\n\n$ show plugins; // 查看插件\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("h3",{attrs:{id:"_1、创建用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 1、创建用户")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ CREATE USER mc_test@'192.168.1.%' IDENTIFIED BY '123456' WITH MAX_USER_CONNECTIONS 1;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("指定用户最大只能有一个线程连接 "),e("code",[s._v("WITH MAX_USER_CONNECTIONS 1;")])])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("h3",{attrs:{id:"_2、账号授权"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、账号授权","aria-hidden":"true"}},[s._v("#")]),s._v(" 2、账号授权")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("GRANT\n    priv_type [(column_list)]\n      [, priv_type [(column_list)]] ...\n    ON [object_type] priv_level\n    TO user_or_role [, user_or_role] ...\n    [WITH GRANT OPTION]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("code",[s._v("priv_type [(column_list)] [, priv_type [(column_list)]] ...")]),s._v("：权限列表 "),e("code",[s._v("show privileges;（ 查看当前版本所支持的权限列表 ）")])]),s._v(" "),e("p",[e("code",[s._v("ON [object_type] priv_level")]),s._v("：指定对数据库的什么对象授权，在哪个对象中授权，这个对象可以是一个数据库、表、存储过程、函数，都可以，如果要对表中的列进行授权的话，则需要在 权限列表（"),e("code",[s._v("show privileges;")]),s._v("）来指定一个列的列表，比如什么权限对应什么列是有效的。")]),s._v(" "),e("p",[e("code",[s._v("TO user_or_role [, user_or_role] ...")]),s._v("： 把对象权限授给指定用户或角色。")]),s._v(" "),e("br"),s._v(" "),e("ul",[e("li",[s._v("MySQL 的常用权限")])]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("权限名称")]),s._v(" "),e("th",[s._v("说明")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("Insert")]),s._v(" "),e("td",[s._v("向表中插入数据的权限")])]),s._v(" "),e("tr",[e("td",[s._v("Delete")]),s._v(" "),e("td",[s._v("删除表中数据的权限")])]),s._v(" "),e("tr",[e("td",[s._v("update")]),s._v(" "),e("td",[s._v("修改表中数据的权限")])]),s._v(" "),e("tr",[e("td",[s._v("Select")]),s._v(" "),e("td",[s._v("查询表中数据的权限")])]),s._v(" "),e("tr",[e("td",[s._v("Execute")]),s._v(" "),e("td",[s._v("执行存储过程的权限")])])])]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("//\n\nshow privileges;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("br"),s._v(" "),e("br"),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 给通过 `192.168.1.*` 网段访问的用户 mc_class 授予 mysql.user 表上的 user 和 host 列的查询权限\n// 对表中某一列授予权限\n$ GRANT select(user, host) on mysql.user to mc_class@'192.168.1.%';\n\n// 给用户 mc_class 授予 mysql.user 表上所有列的查询权限\n$ GRANT select on mysql.user TO mc_class@'192.168.1.%';\n\n// 给用户 mc_class 授予 mysql 库中所有表的查询权限\n$ GRANT select on mysql.* TO mc_class@'192.168.1.%';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("br"),s._v(" "),e("br"),s._v(" "),e("p",[s._v("GRANT 命令的注意事项：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("使用 grant 授权的数据库账户必须存在")])]),s._v(" "),e("li",[e("p",[s._v("用户使用 grant 命令授权必须具有 grant option 的权限，也就是说，在给其他账户授权时，只能将自己拥有的权限进行授权。")])]),s._v(" "),e("li",[e("p",[s._v("获取命令帮助 "),e("code",[s._v("\\h grant")])])])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("h3",{attrs:{id:"_3、收回授权"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、收回授权","aria-hidden":"true"}},[s._v("#")]),s._v(" 3、收回授权")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("REVOKE\n    priv_type [(column_list)]\n      [, priv_type [(column_list)]] ...\n    ON [object_type] priv_level\n    FROM user_or_role [, user_or_role] ...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("要注意的是，这个权限是我们曾经使用 "),e("code",[s._v("GRANT 命令")]),s._v(" 授予过的权限。同样不能收回这个用户并没有的权限的。")]),s._v(" "),e("br"),s._v(" "),e("p",[s._v("🌰")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ GRANT select, delete, insert, update ON mysql.* TO mc_class@'192.168.1.%';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("code",[s._v("mysql 数据库")]),s._v(" 是一个 MySQL 的系统库，是不允许普通用户进行修改的。")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 收回用户 mc_class 在 mysql 库中所有表 delete, insert, update 操作\nREVOKE delete, insert, update ON mysql.* FROM mc_class@'192.168.1.%';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("h3",{attrs:{id:"创建数据库对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库对象","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建数据库对象")]),s._v(" "),e("p",[s._v("DDL ( Data Definition language )")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("建立/修改/删除数据库：create/alter/drop database")])]),s._v(" "),e("li",[e("p",[s._v("建立/修改/删除表：create/alter/drop table")])]),s._v(" "),e("li",[e("p",[s._v("建立/删除索引：create/drop index")])]),s._v(" "),e("li",[e("p",[s._v("清空表：truncate table")])]),s._v(" "),e("li",[e("p",[s._v("重命名表：rename table")])]),s._v(" "),e("li",[e("p",[s._v("建立/修改/删除视图：create/alter/drop view")])])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("p",[e("strong",[s._v("1、建立数据库 imc_db")])]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 创建:  db_name(数据名称)\nCREATE {DATABASE | SCHEMA} [IF NOT EXISTS] db_name\n    [create_specification] ...\n\n// 修改:  也只是字符集和排序规则\nALTER {DATABASE | SCHEMA} [db_name]\n    alter_specification ...\n\n// 删除: 删除后, 只能通过备份进行恢复\nDROP {DATABASE | SCHEMA} [IF EXISTS] db_name\n\n// 设置字符集和排序规则\ncreate_specification:\n    [DEFAULT] CHARACTER SET [=] charset_name\n  | [DEFAULT] COLLATE [=] collation_name\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("br"),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ CREATE DATABASE imc_db;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("br"),s._v(" "),e("p",[e("strong",[s._v("2、建立数据库 imc_db 中的表")])]),s._v(" "),e("blockquote",[e("p",[s._v("新增")])]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 用了这个关键字 TEMPORARY , 则创建的是临时表, 也就是建立当前表的线程可以访问的表, 当前线程退出后, 表就被删除了\nCREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name\n    (create_definition,...)\n    [table_options]\n    [partition_options]\n\n// 表定义部分: 定义列名称, 数据类型, 表的主键和索引\ncreate_definition:\n    col_name column_definition\n  | PRIMARY KEY [index_type] (index_col_name,...)\n  | {INDEX|KEY} [index_name] [index_type] (index_col_name,...)\n  | UNIQUE [INDEX|KEY] [index_name] [index_type] (index_col_name,...)\n\n// 列的定义: 指定列的数据类型, 列的属性(列是否为空, 默认值, 是否自增, 是否是主键, 唯一索引, 备注信息)\ncolumn_definition:\n    data_type [NOT NULL | NULL] [DERAULT default_value]\n      [AUTO_INCREMENT] [UNIQUE [KEY]] [[PRIMARY] KEY]\n      [COMMENT 'string']\n\n// 表的选项: 表的备注, 存储引擎, 字符集, 排序规则\ntable_options:\n   | COMMENT [=] 'string'\n   | ENGINE [=] engine_name\n   | [DEFAULT] CHARACTER SET [=] charset_name\n   | [DEFAULT] COLLATE [=] collation_name\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("blockquote",[e("p",[s._v("查看完整语法 '$ help create table'")])]),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("修改")])]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 指定要修改的表是什么\nALTER TABLE tbl_name\n    [alter_specification [, alter_specification] ...]\n    [partition_options]\n\n// 修改的内容\n// ADD 关联自和所要新增的列的定义来在表中增加一列（列的名称、和数据类型），并且还可以是使用 FIRST | AFTER 关键字，来指定新列在表中的自定位置\n// ALTER 修改列的默认值的设置\n// CHANGE 修改列名的同时，来修改列的定义\n// MODIFY 在不修改列名的情况下，来修改列的定义、位置\n// DROP 关键字来删除表中不需要的列，\nalter_specification:\n    table_options\n  | ADD [COLUMN] col_name column_definition [FIRST | AFTER col_name]\n  | ALTER [COLUMN] col_name {SET DEFAULT {literal | (expr)} | DROP DEFAULT}\n  | CHANGE [COLUMN] old_col_name new_col_name column_definition [FIRST|AFTER col_name]\n  | MODIFY [COLUMN] col_name column_definition [FIRST | AFTER col_name]\n  | DROP [COLUMN] col_name\n  | RENAME COLUMN old_col_name TO new_col_name\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("blockquote",[e("p",[s._v("查看完整语法 '$ help alter table'")])]),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("删除")])]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 删除\nDROP [TEMPORARY] TABLE [IF EXISTS] tal_name [, tbl_name] ...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("h2",{attrs:{id:"创建数据库对象-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库对象-2","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建数据库对象")]),s._v(" "),e("blockquote",[e("p",[s._v("设置字符集")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SET character_set_client = utf8mb4 ;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("课程表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_course` (\n  `course_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '课程ID',\n  `title` varchar(20) NOT NULL DEFAULT '' COMMENT '课程主标题',\n  `title_desc` varchar(50) NOT NULL DEFAULT '' COMMENT '课程副标题',\n  `type_id` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '课程方向ID',\n  `class_id` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '课程分类ID',\n  `level_id` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '课程难度ID',\n  `online_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '课程上线时间',\n  `study_cnt` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '学习人数',\n  `course_time` time NOT NULL DEFAULT '00:00:00' COMMENT '课程时长',\n  `intro` varchar(200) NOT NULL DEFAULT '' COMMENT '课程简介',\n  `info` varchar(200) NOT NULL DEFAULT '' COMMENT '学习需知',\n  `harvest` varchar(200) NOT NULL DEFAULT '' COMMENT '课程收获',\n  `user_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '讲师ID',\n  `main_pic` varchar(200) NOT NULL DEFAULT '' COMMENT '课程主图片',\n  `content_score` decimal(3,1) NOT NULL DEFAULT '0.0' COMMENT '内容评分',\n  `level_score` decimal(3,1) NOT NULL DEFAULT '0.0' COMMENT '简单易懂',\n  `logic_score` decimal(3,1) NOT NULL DEFAULT '0.0' COMMENT '逻辑清晰',\n  `score` decimal(3,1) NOT NULL DEFAULT '0.0' COMMENT '综合评分',\n  PRIMARY KEY (`course_id`),\n  UNIQUE KEY `udx_title` (`title`)\n) COMMENT='课程主表';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("p",[e("code",[s._v("auto_increment")]),s._v("： 表示这一列是自增 id 列，MySQL 在插入数据的时候，会自动来生成自增 id 的序列，并且 MySQL 会限制当前表中只能存在一个有  "),e("code",[s._v("auto_increment")]),s._v("  的列，且在这个列必须是这个表的主键，或者说是唯一索引的一部分，因此在表最后使用  "),e("code",[s._v("PRIMARY KEY")]),s._v("  来定义  "),e("code",[s._v("auto_increment")]),s._v("  。")]),s._v(" "),e("p",[e("code",[s._v("NOT NULL")]),s._v("： 标识该列为非空的，这主要是为了优化表的查询性能所考虑的，因为在这个  "),e("code",[s._v("B-Tree")]),s._v("  索引中，并不能对空值进行索引，并且还使用  "),e("code",[s._v("DEFAULT")]),s._v("  关键字，给每一个具有非空属性的列定义了一个默认值。")]),s._v(" "),e("p",[e("code",[s._v("UNIQUE KEY")]),s._v("：我们在课程主标题列上定义一个唯一索引，这就保证了在课程主表中，课程的标题是不重复且唯一的，这么做的目的是将课程主标题来作为我们的业务主键来使用。")]),s._v(" "),e("p",[e("code",[s._v("COMMENT")]),s._v("：定义备注信息")]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("课程章节表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_chapter` (\n `chapter_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '章节ID',\n `course_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '课程ID',\n `chapter_name` varchar(50) NOT NULL DEFAULT '' COMMENT '章节名称',\n `chapter_info` varchar(200) NOT NULL DEFAULT '' COMMENT '章节说明',\n `chapter_no` tinyint(2) unsigned zerofill NOT NULL DEFAULT '00' COMMENT '章节编号',\n PRIMARY KEY (`chapter_id`),\n UNIQUE KEY `udx_couseid` (`course_id`,`chapter_name`)\n) COMMENT='课程章节';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[e("code",[s._v("UNIQUE KEY")]),s._v("： 定义了一个联合的唯一索引，也就是这两个列的组合是不能重复，而单独的出现重复是没有问题的。")]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("课程小节表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_subsection` (\n  `sub_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '小节ID',\n  `chapter_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '章节ID',\n  `course_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '课程ID',\n  `sub_name` varchar(50) NOT NULL DEFAULT '' COMMENT '小节名称',\n  `sub_url` varchar(200) NOT NULL DEFAULT '' COMMENT '小节URL',\n  `video_type` enum('avi','mp4','mpeg') NOT NULL DEFAULT 'mp4' COMMENT '视频格式',\n  `sub_time` time NOT NULL DEFAULT '00:00:00' COMMENT '小节时长',\n  `sub_no` tinyint(2) unsigned zerofill NOT NULL DEFAULT '00' COMMENT '章节编号',\n  PRIMARY KEY (`sub_id`),\n  UNIQUE KEY `udx_chapterid_courseid_subname` (`chapter_id`,`course_id`,`sub_name`)\n) ENGINE=InnoDB AUTO_INCREMENT=9834 DEFAULT CHARSET=utf8 COMMENT='课程小节表';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("课程分类表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_class` (\n  `class_id` smallint(5) unsigned NOT NULL AUTO_INCREMENT COMMENT '课程分类ID',\n  `class_name` varchar(10) NOT NULL DEFAULT '' COMMENT '分类名称',\n  `add_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '填加时间',\n  PRIMARY KEY (`class_id`)\n) COMMENT='课程分类';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("课程方向表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_type` (\n  `type_id` smallint(5) unsigned NOT NULL AUTO_INCREMENT COMMENT '课程方向ID',\n  `type_name` varchar(10) NOT NULL DEFAULT '' COMMENT '课程方向名称',\n  `add_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '填加时间',\n  PRIMARY KEY (`type_id`)\n) COMMENT='课程方向表';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("课程难度表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_level` (\n  `level_id` smallint(5) unsigned NOT NULL AUTO_INCREMENT COMMENT '课程难度ID',\n  `level_name` varchar(10) NOT NULL DEFAULT '' COMMENT '课程难度名称',\n  `add_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '填加时间',\n  PRIMARY KEY (`level_id`)\n) COMMENT='课程方向表';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("用户表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_user` (\n  `user_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '用户ID',\n  `user_nick` varchar(20) NOT NULL DEFAULT '慕课网' COMMENT '用户昵称',\n  `user_pwd` char(32) NOT NULL DEFAULT '' COMMENT '密码',\n  `sex` char(2) NOT NULL DEFAULT '未知' COMMENT '性别',\n  `province` varchar(20) NOT NULL DEFAULT '' COMMENT '省',\n  `city` varchar(20) NOT NULL DEFAULT '' COMMENT '市',\n  `Position` varchar(10) NOT NULL DEFAULT '未知' COMMENT '职位',\n  `mem` varchar(100) NOT NULL DEFAULT '' COMMENT '说明',\n  `exp_cnt` mediumint(8) unsigned NOT NULL DEFAULT '0' COMMENT '经验值',\n  `score` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '积分',\n  `follow_cnt` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '关注人数',\n  `fans_cnt` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '粉丝人数',\n  `is_teacher` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '讲师标识,0:普通用户,1:讲师用户',\n  `reg_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '注册时间',\n  `user_status` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '用户状态 1:正常 0:冻结',\n  PRIMARY KEY (`user_id`),\n  UNIQUE KEY `udx_usernick` (`user_nick`)\n) COMMENT='用户表';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("问答评论表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_question` (\n  `quest_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '评论',\n  `user_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '用户ID',\n  `course_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '课程ID',\n  `chapter_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '章节ID',\n  `sub_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '小节ID',\n  `replyid` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '父评论ID',\n  `quest_title` varchar(50) NOT NULL DEFAULT '' COMMENT '评论标题',\n  `quest_content` text COMMENT '评论内容',\n  `quest_type` enum('问答','评论') NOT NULL DEFAULT '评论' COMMENT '评论类型',\n  `view_cnt` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '浏览量',\n  `add_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '发布时间',\n  PRIMARY KEY (`quest_id`)\n) COMMENT='问答评论表';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("用户笔记表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_note` (\n  `note_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '笔记ID',\n  `user_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '用户ID',\n  `course_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '课程ID',\n  `chapter_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '章节ID',\n  `sub_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '小节ID',\n  `note_title` varchar(50) NOT NULL DEFAULT '' COMMENT '笔记标题',\n  `note_content` text COMMENT '评论内容',\n  `add_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '发布时间',\n  PRIMARY KEY (`note_id`)\n) COMMENT='笔记表';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("课程评价表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_classvalue` (\n  `value_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '评价ID',\n  `user_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '用户ID',\n  `course_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '课程ID',\n  `content_score` decimal(3,1) NOT NULL DEFAULT '0.0' COMMENT '内容评分',\n  `level_score` decimal(3,1) NOT NULL DEFAULT '0.0' COMMENT '简单易懂',\n  `logic_score` decimal(3,1) NOT NULL DEFAULT '0.0' COMMENT '逻辑清晰',\n  `score` decimal(3,1) NOT NULL DEFAULT '0.0' COMMENT '综合评分',\n  `add_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '发布时间',\n  PRIMARY KEY (`value_id`)\n) COMMENT='课程评价表';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("选课表")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE `imc_selectcourse` (\n  `select_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '选课ID',\n  `user_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '用户ID',\n  `course_id` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '课程ID',\n  `select_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '选课时间',\n  `study_time` time NOT NULL DEFAULT '00:00:00' COMMENT '累积听课时间',\n  PRIMARY KEY (`select_id`)\n) COMMENT='用户选课表';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("br"),s._v(" "),e("br"),s._v(" "),e("br"),s._v(" "),e("h2",{attrs:{id:"维护表中的索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#维护表中的索引","aria-hidden":"true"}},[s._v("#")]),s._v(" 维护表中的索引")]),s._v(" "),e("p",[s._v("在建好表后，就可以往表中写入数据，但是我们写入数据的最终目的，并不是为了存储，而是为了使用这些数据，而在使用过程中，为了提高数据的查询效率，不可避免需要在表中建立一些索引，在建立数据表结果的时候，根据业务对数据的要求，建立过一些索引，这些索引的主要目的是为了限制存储在表中的数据，包括每个表的主键索引和唯一索引，如果我们知道之后，如何使用这些数据，我们也可以在建立表的同时，建立一些其他的索引，因此可见，我们可以使用表的建立、或修改语句来创建索引，除此之外，还有另一种创建索引的方式，就是使用  "),e("code",[s._v("CREATE INDEX")]),s._v("  语句建立索引。由于我们需要根据具体业务的查询语句，来决定如何建立索引。")]),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("创建")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE [UNIQUE] INDEX index_name\n  ON tbl_name (index_col_name,...)\n\nindex_col_name:\n  col_name [(length)] [ASC | DESC]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("code",[s._v("ON")]),s._v("：来指定在哪个表上，哪个列中建立索引，"),e("code",[s._v("index_name")]),s._v(" 索引的名字，建立索引列的列表要包括在小括号中，并且可以指定是按升序，还是降序来进行排列，另外还可以使用  "),e("code",[s._v("UNIQUE")]),s._v("  来指定我们所建立的索引的列是否可以有重复数据，这里要注意，如果建立的联合的多类的索引，只要所有这些建立索引的列值组合起来是不重复的就可以了，而不是指每一列的值都不能重复。")]),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("删除")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("DROP INDEX index_name ON tbl_name\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("删除索引并不会对表中的数据照成影响，但是可能会影响之前 SQL 的执行计划。")]),s._v(" "),e("br"),s._v(" "),e("blockquote",[e("p",[s._v("其他的 DDL 语句")])]),s._v(" "),e("ul",[e("li",[e("p",[s._v("清空表： "),e("code",[s._v("TRUNCATE TABLE imc_note;")])]),s._v(" "),e("p",[e("code",[s._v("TRUNCATE")]),s._v(" 所做的实际操作就是，先进行 "),e("code",[s._v("DROP")]),s._v(" ，然后在 "),e("code",[s._v("CREATE")]),s._v("  一个相同结构的表，因此其删除全表的速度，要比使用 "),e("code",[s._v("DELETE")]),s._v(" 全表数据要快很多，并且也不会生成大量的二进制日志，这是它的优点，缺点就是无法通过二进制日志的反解析，对它进行恢复。")])]),s._v(" "),e("li",[e("p",[s._v("重命名表："),e("code",[s._v("RENAME TABLE imc_note TO bak_imc_note;")])])])])],1)},[],!1,null,null,null);n.default=t.exports}}]);