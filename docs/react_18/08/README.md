### 设计 Fiber 架构的动机

Fiber 架构是 React 16（React Fiber）开始引入的一种新的内部架构，其核心在于解决 React 15 中存在的性能瓶颈，并通过异步渲染、优先级调度等机制实现更流畅的界面更新。

- 改进性能：React 15 的 Stack Reconciler 采用递归方式更新 DOM，导致复杂应用中出现严重的性能问题，Fiber 架构通过将更新任务拆分为更小的部分并在事件循环中交替执行它们，从而实现了一种称为时间切片的技术，使得 React 在处理大型应用和复杂场景时具有更好的性能。
- 引入优先级调度：Fiber 架构允许 React 根据任务的优先级对它们进行调度。这意味着 React 可以在处理高优先级更新（如用户输入）时暂停低优先级更新。这有助于避免长时间运行的任务阻塞用户界面，从而提高用户体验。
- 更好的错误边界处理：在早期的 React 版本中，错误边界处理不够完善，可能导致整个应用崩溃。Fiber 架构引入了更强大的错误边界处理机制，允许开发者更容易地捕获和处理组件层级中的错误。
- 支持并发模式：Fiber 架构为 React 的并发模式（Concurrent Mode）奠定了基础。并发模式是 React 18 中引入的一种实验性功能，利用并发、时间切片和优先级调度等概念，以提高用户界面的性能和响应速度。
- 更好的可维护性和扩展性：Fiber 架构使得 React 的内部代码更加模块化和可维护。这为未来的功能扩展和优化提供了更好的基础。

更细节技术内容，可参考 React 核心团队成员 2016 年的文章：[React Fiber Architecture](https://github.com/acdlite/react-fiber-architecture)
